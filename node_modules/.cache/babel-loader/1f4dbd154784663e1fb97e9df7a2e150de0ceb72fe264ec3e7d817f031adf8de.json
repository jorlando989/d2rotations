{"ast":null,"code":"import _classCallCheck from\"C:/Users/jorla/Documents/d2rotations/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/jorla/Documents/d2rotations/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/jorla/Documents/d2rotations/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/jorla/Documents/d2rotations/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import\"./styles/component.css\";import{getInventoryItemDef,getActivityDef}from\"@d2api/manifest-web\";import{renderRewards}from\"../services/descriptionRenderer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_ENDPOINT=process.env.REACT_APP_API_ENDPOINT;var Wellspring=/*#__PURE__*/function(_React$Component){_inherits(Wellspring,_React$Component);var _super=_createSuper(Wellspring);function Wellspring(props){var _this;_classCallCheck(this,Wellspring);_this=_super.call(this,props);_this.state={apiResponse:{bossName:\"\",activityHash:-1,weaponHash:-1}};return _this;}_createClass(Wellspring,[{key:\"getWellspringRotation\",value:function getWellspringRotation(){var _this2=this;fetch(\"\".concat(API_ENDPOINT,\"/api/wellspring\")).then(function(res){return res.json();}).then(function(res){return _this2.setState({apiResponse:res});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getWellspringRotation();}},{key:\"getInfo\",value:function getInfo(wellspringInfo){var activityInfo=getActivityDef(wellspringInfo.activityHash);if(activityInfo===undefined){return;}var rewardInfo=getInventoryItemDef(wellspringInfo.weaponHash);if(rewardInfo===undefined){return;}var activityRewards=activityInfo.rewards.flatMap(function(_ref){var rewardItems=_ref.rewardItems;var rewards=rewardItems.filter(function(reward){return reward!==undefined;}).map(function(reward){var rewardData=getInventoryItemDef(reward.itemHash);return rewardData;});return rewards;});return{activityInfo:activityInfo,rewardInfo:rewardInfo,activityRewards:activityRewards};}},{key:\"render\",value:function render(){if(this.state!==null&&this.state.apiResponse.bossName!==\"\"){var wellspringInfo=this.getInfo(this.state.apiResponse);if(wellspringInfo===undefined)return/*#__PURE__*/_jsx(\"div\",{children:\"error loading Wellspring reward\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-teal itemCard\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:wellspringInfo.activityInfo.displayProperties.name}),/*#__PURE__*/_jsx(\"div\",{children:wellspringInfo.activityInfo.displayProperties.description})]}),/*#__PURE__*/_jsx(\"hr\",{}),renderRewards(wellspringInfo.activityRewards)]});}}}]);return Wellspring;}(React.Component);export default Wellspring;","map":{"version":3,"names":["React","getInventoryItemDef","getActivityDef","renderRewards","jsx","_jsx","jsxs","_jsxs","API_ENDPOINT","process","env","REACT_APP_API_ENDPOINT","Wellspring","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","apiResponse","bossName","activityHash","weaponHash","_createClass","key","value","getWellspringRotation","_this2","fetch","concat","then","res","json","setState","componentDidMount","getInfo","wellspringInfo","activityInfo","undefined","rewardInfo","activityRewards","rewards","flatMap","_ref","rewardItems","filter","reward","map","rewardData","itemHash","render","children","className","displayProperties","name","description","Component"],"sources":["C:/Users/jorla/Documents/d2rotations/my-app/src/components/Wellspring.tsx"],"sourcesContent":["import React from \"react\";\r\nimport \"./styles/component.css\";\r\nimport { getInventoryItemDef, getActivityDef } from \"@d2api/manifest-web\";\r\nimport { DestinyActivityDefinition, DestinyInventoryItemDefinition } from \"bungie-api-ts/destiny2\";\r\nimport { renderRewards } from \"../services/descriptionRenderer\";\r\n\r\nconst API_ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\r\n\r\ntype wellspringResponse = {\r\n\tbossName: string,\r\n    activityHash: number,\r\n    weaponHash: number\r\n};\r\n\r\ntype wellspringInfoType = {\r\n    activityInfo: DestinyActivityDefinition,\r\n    rewardInfo: DestinyInventoryItemDefinition,\r\n    activityRewards: DestinyInventoryItemDefinition[]\r\n};\r\n\r\ntype MyProps = {};\r\n\r\ntype MyState = {\r\n\tapiResponse: wellspringResponse;\r\n};\r\n\r\nclass Wellspring extends React.Component<MyProps, MyState> {\r\n\tconstructor(props: MyProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tapiResponse: {\r\n\t\t\t\tbossName: \"\",\r\n                activityHash: -1,\r\n                weaponHash: -1\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tgetWellspringRotation() {\r\n\t\tfetch(`${API_ENDPOINT}/api/wellspring`)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => this.setState({ apiResponse: res }));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getWellspringRotation();\r\n\t}\r\n\r\n    getInfo(wellspringInfo: wellspringResponse) {\r\n\t\tconst activityInfo = getActivityDef(wellspringInfo.activityHash);\r\n        if (activityInfo === undefined) {\r\n            return;\r\n        }\r\n\t\tconst rewardInfo = getInventoryItemDef(wellspringInfo.weaponHash);\r\n        if (rewardInfo === undefined) {\r\n            return;\r\n        }\r\n\r\n\t\tconst activityRewards = activityInfo.rewards.flatMap(({rewardItems}) => {\r\n\t\t\tconst rewards = rewardItems.filter(reward => {\r\n                return reward !== undefined;\r\n            }).map(reward => {\r\n\t\t\t\tconst rewardData = getInventoryItemDef(reward.itemHash)!;\r\n\t\t\t\treturn rewardData;\r\n\t\t\t});\r\n\t\t\treturn rewards;\r\n\t\t});\r\n        return {\r\n            activityInfo,\r\n            rewardInfo,\r\n            activityRewards\r\n        };\r\n    }\r\n\r\n\trender() {\r\n\t\tif (this.state !== null && this.state.apiResponse.bossName !== \"\") {\r\n            const wellspringInfo: wellspringInfoType | undefined = this.getInfo(this.state.apiResponse);\r\n            if (wellspringInfo === undefined) return (\r\n                <div>error loading Wellspring reward</div>\r\n            );\r\n\t\t\treturn (\r\n\t\t\t\t<div className='bg-teal itemCard'>\r\n\t\t\t\t\t<div>\r\n                        <h3>\r\n                            {wellspringInfo.activityInfo.displayProperties.name}\r\n                        </h3>\r\n                        <div>\r\n                            {wellspringInfo.activityInfo.displayProperties.description}\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    {renderRewards(wellspringInfo.activityRewards)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Wellspring;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}